@startuml
' # JUEGO #
'
class Game <<Singleton>>
class Menu <<Singleton>>
class CollisionsEngine <<Singleton>>
class GraphicEngine <<Singleton>>
class LevelReader <<Singleton>>
Game "1" --> "1" Menu
Game "1" *-l- "1" Level
Game "1" --> "1" Character
Game "1" *-u- "1" GraphicEngine
Game "1" *-u- "1" CollisionsEngine
Game "1" -r-> "1" Ranking
Game "1" -- "1" LevelReader
Game "1" --> "0..*" Entity

' # ENTIDAD #
'
interface Entity
Entity "1" ---u-> "0..*" GraphicElement
Entity "1" ---u- "0..*" Collider

' # GRAFICA #
'
interface GraphicElement
class SpriteFactory <<Singleton>>
class Sprite <<Flyweight>>
Sprite "0..*" --o "1" SpriteFactory
GraphicElement o-l- "0..*" Sprite
GraphicElement "1..*" -- "1" GraphicEngine
GraphicElement "1" --> "1" Position

' # COLLISIONS #
'
interface Collider
Collider "0..1" -- "0..1" GraphicElement
Collider "1" --> "0..1" Position
Collider "1..*" -- "1" CollisionsEngine

' # PERSONAJE #
'
interface StrategyState
class Character
Character .....|> Entity
Character -u-> "0..*" StrategyState
DefaultState .u.|> StrategyState
SuperState .u.|> StrategyState
FireFlowerState .u.|> StrategyState
FlowerWithSuper .u.|> StrategyState
WithInvincible .u.|> StrategyState
Invincible .u.|> StrategyState
' # NIVEL #
'
interface Plataform
interface Enemy
interface PowerUp
class Coin
Plataform ...u.|> Entity
Enemy ..u.|> Entity
PowerUp ..u.|> Entity
Coin .u.|> Entity

' # ENEMIGOS #
'

Enemy .u.|> Movable
Goomba .u.|> Enemy
KoopaTroopa .u.|> Enemy
PiranhaPlant .u.|> Enemy
Lakitu .u.|> Enemy
Spiny .u.|> Enemy
BuzzyBeattle .u.|> Enemy
Pipe --> "0..1" PiranhaPlant

' # PLATAFORMAS #
'
Void .u.|> Plataform
SolidBlock .u.|> Plataform
SolidBrick -u-|> SolidBlock
QuestionBlock -u-|> SolidBlock
Pipe .u.|> Plataform

' # POWERUPS #
'
SuperMushroom .u.|> PowerUp
FireFlower .u.|> PowerUp
Star .u.|> PowerUp
GreenMushroom .u.|> PowerUp

' # PROYECTIL #
'
interface Proyectile
Proyectile .u.|> Entity
FireBall .u.|> Proyectile
Star .u.|> Proyectile

' # DESLIZABLE #
'

interface Movable
interface Slider
Slider .u.|> Movable
Slider .u.|> Entity
Shell .u.|> Slider
KoopaTroopa "1" o-- "1" Shell
GreenMushroom .u.|> Slider
SuperMushroom .u.|> Slider

' # FORMATTING #
'
@enduml
